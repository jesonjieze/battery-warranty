<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>杰泽电池电子质保卡</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-red: #d32f2f;
            --primary-blue: #1976d2;
            --primary-light: #2196f3;
            --dark-bg: #0d1b2a;
            --card-bg: #ffffff;
            --text-primary: #212121;
            --text-secondary: #757575;
            --border-color: #e0e0e0;
            --success-color: #4caf50;
            --warning-color: #ff9800;
            --shadow-sm: 0 1px 3px rgba(0,0,0,0.1);
            --shadow-md: 0 3px 8px rgba(0,0,0,0.12);
            --shadow-lg: 0 6px 16px rgba(0,0,0,0.15);
            --radius-sm: 6px;
            --radius-md: 10px;
            --radius-lg: 14px;
            --transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'PingFang SC', 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.5;
            font-size: 15px;
        }

        .app-container {
            max-width: 100%;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* 顶部背景图片区域 - 手机优化 */
        .header-bg-container {
            position: relative;
            height: 180px;
            overflow: hidden;
            border-radius: 0 0 var(--radius-lg) var(--radius-lg);
            box-shadow: var(--shadow-md);
            transition: var(--transition);
        }

        .header-bg {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary-red) 0%, var(--primary-blue) 100%);
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .header-bg::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.2);
        }

        .header-content {
            position: relative;
            z-index: 2;
            text-align: center;
            color: white;
            padding: 0 16px;
            width: 100%;
        }

        .product-code {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 18px;
            padding: 6px 16px;
            font-size: 15px;
            font-weight: 600;
            letter-spacing: 0.5px;
            margin-bottom: 10px;
            display: inline-block;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .header-title {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 6px;
            text-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }

        .header-subtitle {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 15px;
        }

        .badge-container {
            display: flex;
            justify-content: center;
            gap: 8px;
            flex-wrap: wrap;
        }

        .badge {
            background: rgba(255, 255, 255, 0.9);
            color: var(--primary-red);
            padding: 5px 12px;
            border-radius: 16px;
            font-weight: 600;
            font-size: 12px;
            display: flex;
            align-items: center;
            gap: 4px;
            box-shadow: 0 1px 4px rgba(0,0,0,0.1);
        }

        .badge.blue {
            color: var(--primary-blue);
        }

        .badge i {
            font-size: 10px;
        }

        .upload-bg-btn {
            position: absolute;
            top: 12px;
            right: 12px;
            z-index: 3;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-blue);
            font-size: 16px;
            cursor: pointer;
            box-shadow: var(--shadow-sm);
            transition: var(--transition);
        }

        .upload-bg-btn:hover {
            background: white;
            transform: scale(1.1);
        }

        /* 主内容区域 - 手机优化 */
        .main-content {
            flex: 1;
            padding: 16px 12px;
            max-width: 100%;
            margin: 0 auto;
            width: 100%;
        }

        /* 功能模块导航 - 手机优化 */
        .nav-tabs {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 1px;
            background: var(--border-color);
            border-radius: var(--radius-md);
            overflow: hidden;
            margin-bottom: 16px;
            box-shadow: var(--shadow-sm);
        }

        .nav-tab {
            background: white;
            border: none;
            padding: 12px 4px;
            font-size: 12px;
            font-weight: 600;
            color: var(--text-secondary);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }

        .nav-tab i {
            font-size: 18px;
            margin-bottom: 3px;
        }

        .nav-tab.active {
            background: var(--primary-blue);
            color: white;
            box-shadow: 0 2px 6px rgba(25, 118, 210, 0.3);
        }

        .nav-tab:hover:not(.active) {
            background: #f5f7fa;
        }

        /* 内容区域 - 手机优化 */
        .tab-content {
            display: none;
            background: white;
            border-radius: var(--radius-md);
            padding: 18px;
            box-shadow: var(--shadow-sm);
            animation: fadeIn 0.3s ease;
            margin-bottom: 16px;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* 产品信息卡片样式 - 手机优化 */
        .product-info-card {
            background: white;
            border-radius: var(--radius-md);
            padding: 18px;
            box-shadow: var(--shadow-sm);
            margin-bottom: 16px;
        }

        .product-info-card h3 {
            margin-bottom: 16px;
            color: var(--primary-blue);
            font-size: 16px;
            font-weight: 600;
        }

        .info-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
        }

        .info-item {
            display: flex;
            flex-direction: column;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--border-color);
        }

        .info-item:last-child {
            border-bottom: none;
        }

        .info-label {
            font-size: 12px;
            color: var(--text-secondary);
            margin-bottom: 4px;
        }

        .info-value {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 14px;
        }

        .status-badge {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }

        .status-badge.inactive {
            background: #fef3c7;
            color: #d97706;
        }

        .status-badge.active {
            background: #d1fae5;
            color: #065f46;
        }

        .status-badge.expired {
            background: #fee2e2;
            color: #dc2626;
        }

        /* 扫码按钮 - 手机优化 */
        .scan-section {
            text-align: center;
            padding: 16px 0;
        }

        .scan-btn {
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-light));
            color: white;
            border: none;
            border-radius: 40px;
            padding: 14px 32px;
            font-size: 16px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 0 auto;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(25, 118, 210, 0.3);
            transition: var(--transition);
        }

        .scan-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(25, 118, 210, 0.4);
        }

        .scan-btn:active {
            transform: translateY(0);
        }

        .scan-btn i {
            font-size: 18px;
        }

        .scan-hint {
            font-size: 13px;
            color: var(--text-secondary);
            margin-top: 10px;
        }

        /* 二维码扫描模块 - 手机优化 */
        .qr-scanner-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 16px;
        }

        .qr-scanner-container {
            background: white;
            border-radius: var(--radius-lg);
            width: 100%;
            max-width: 320px;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            animation: modalIn 0.3s ease;
        }

        @keyframes modalIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .scanner-header {
            background: var(--primary-blue);
            color: white;
            padding: 16px;
            text-align: center;
        }

        .scanner-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 6px;
        }

        .scanner-subtitle {
            font-size: 13px;
            opacity: 0.9;
        }

        .scanner-body {
            padding: 20px;
            text-align: center;
        }

        .scanner-area {
            width: 180px;
            height: 180px;
            margin: 0 auto 16px;
            border: 2px dashed var(--border-color);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .scanner-area.active {
            border-color: var(--primary-blue);
        }

        .scanner-laser {
            position: absolute;
            width: 100%;
            height: 2px;
            background: var(--primary-blue);
            top: 0;
            animation: scan 2s infinite linear;
        }

        @keyframes scan {
            0% { top: 0; }
            50% { top: 100%; }
            100% { top: 0; }
        }

        .scanner-placeholder {
            text-align: center;
            color: var(--text-secondary);
        }

        .scanner-placeholder i {
            font-size: 36px;
            margin-bottom: 8px;
            color: var(--border-color);
        }

        .scanner-placeholder p {
            font-size: 13px;
        }

        .manual-input {
            margin-top: 16px;
        }

        .manual-input p {
            margin-bottom: 8px;
            color: var(--text-secondary);
            font-size: 13px;
        }

        .input-group {
            display: flex;
            gap: 8px;
        }

        .code-input {
            flex: 1;
            padding: 10px 12px;
            border: 2px solid var(--border-color);
            border-radius: var(--radius-sm);
            font-size: 15px;
            transition: var(--transition);
        }

        .code-input:focus {
            border-color: var(--primary-blue);
            outline: none;
        }

        .scanner-actions {
            display: flex;
            gap: 8px;
            margin-top: 16px;
        }

        .btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: var(--radius-sm);
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .btn-primary {
            background: var(--primary-blue);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-light);
        }

        .btn-secondary {
            background: #f5f5f5;
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            background: #e0e0e0;
        }

        /* 激活命令窗口 - 手机优化 */
        .activation-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1001;
            align-items: center;
            justify-content: center;
            padding: 16px;
        }

        .activation-container {
            background: white;
            border-radius: var(--radius-lg);
            width: 100%;
            max-width: 320px;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            animation: modalIn 0.3s ease;
        }

        .activation-header {
            background: var(--success-color);
            color: white;
            padding: 20px;
            text-align: center;
        }

        .activation-icon {
            font-size: 40px;
            margin-bottom: 10px;
        }

        .activation-title {
            font-size: 20px;
            font-weight: 600;
        }

        .activation-body {
            padding: 20px;
            text-align: center;
        }

        .activation-message {
            font-size: 15px;
            margin-bottom: 16px;
            color: var(--text-primary);
        }

        .activation-code {
            background: #f5f5f5;
            padding: 10px;
            border-radius: var(--radius-sm);
            font-family: monospace;
            font-size: 18px;
            letter-spacing: 1px;
            margin-bottom: 16px;
            word-break: break-all;
        }

        .activation-actions {
            display: flex;
            gap: 8px;
        }

        /* 内容编辑器 - 手机优化 */
        .content-editor {
            display: none;
            margin-top: 16px;
            padding: 16px;
            background: #f9f9f9;
            border-radius: var(--radius-md);
        }

        .editor-active {
            display: block;
        }

        .editor-toolbar {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }

        .editor-btn {
            padding: 6px 12px;
            background: white;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: 13px;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .editor-btn:hover {
            background: #f0f0f0;
        }

        .editor-content {
            width: 100%;
            min-height: 120px;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            font-family: inherit;
            font-size: 13px;
            resize: vertical;
        }

        /* 其他内容样式 - 手机优化 */
        .tab-content h3 {
            font-size: 16px;
            color: var(--primary-blue);
            margin-bottom: 12px;
            font-weight: 600;
        }

        .tab-content p {
            font-size: 14px;
            margin-bottom: 8px;
        }

        .tab-content ul {
            padding-left: 20px;
            margin-bottom: 12px;
        }

        .tab-content li {
            font-size: 13px;
            margin-bottom: 4px;
        }

        /* 响应式设计 - 手机优化 */
        @media (max-width: 768px) {
            .header-bg-container {
                height: 170px;
            }
            
            .header-title {
                font-size: 20px;
            }
            
            .product-code {
                font-size: 14px;
                padding: 5px 14px;
            }
            
            .nav-tab {
                font-size: 11px;
                padding: 10px 3px;
            }
            
            .nav-tab i {
                font-size: 16px;
            }
            
            .tab-content {
                padding: 16px;
            }
            
            .scan-btn {
                padding: 12px 28px;
                font-size: 15px;
            }
            
            .scanner-area {
                width: 160px;
                height: 160px;
            }
            
            .code-input {
                font-size: 14px;
                padding: 9px 11px;
            }
        }

        @media (max-width: 480px) {
            .header-bg-container {
                height: 160px;
            }
            
            .header-title {
                font-size: 19px;
            }
            
            .header-subtitle {
                font-size: 13px;
            }
            
            .badge-container {
                gap: 6px;
            }
            
            .badge {
                padding: 4px 10px;
                font-size: 11px;
            }
            
            .nav-tabs {
                grid-template-columns: repeat(5, 1fr);
            }
            
            .nav-tab span {
                display: inline;
                font-size: 10px;
            }
            
            .nav-tab i {
                font-size: 16px;
                margin-bottom: 2px;
            }
            
            .main-content {
                padding: 12px 10px;
            }
            
            .tab-content {
                padding: 14px;
            }
            
            .info-grid {
                gap: 10px;
            }
            
            .info-item {
                padding-bottom: 8px;
            }
            
            .info-label {
                font-size: 11px;
            }
            
            .info-value {
                font-size: 13px;
            }
            
            .scan-btn {
                padding: 11px 24px;
                font-size: 14px;
            }
            
            .scan-hint {
                font-size: 12px;
            }
            
            .qr-scanner-container {
                max-width: 300px;
            }
            
            .scanner-area {
                width: 150px;
                height: 150px;
            }
            
            .activation-container {
                max-width: 300px;
            }
            
            .activation-title {
                font-size: 18px;
            }
            
            .activation-message {
                font-size: 14px;
            }
            
            .activation-code {
                font-size: 16px;
            }
        }

        @media (max-width: 360px) {
            .header-bg-container {
                height: 150px;
            }
            
            .header-title {
                font-size: 18px;
            }
            
            .product-code {
                font-size: 13px;
                padding: 4px 12px;
            }
            
            .nav-tab {
                padding: 8px 2px;
            }
            
            .nav-tab span {
                font-size: 9px;
            }
            
            .nav-tab i {
                font-size: 14px;
            }
            
            .scan-btn {
                padding: 10px 20px;
                font-size: 13px;
            }
            
            .scanner-area {
                width: 140px;
                height: 140px;
            }
            
            .code-input {
                font-size: 13px;
                padding: 8px 10px;
            }
            
            .btn {
                font-size: 13px;
                padding: 9px;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- 顶部背景图片区域 -->
        <div class="header-bg-container">
            <div class="header-bg" id="headerBackground">
                <div class="header-content">
                    <div class="product-code" id="productCode">一物一码 105600000001</div>
                    <h1 class="header-title">电子保修卡</h1>
                    <p class="header-subtitle">规范服务珍惜好名声</p>
                    <div class="badge-container">
                        <div class="badge">
                            <i class="fas fa-check-circle"></i>
                            正品保证
                        </div>
                        <div class="badge blue">
                            <i class="fas fa-shield-alt"></i>
                            全国联保
                        </div>
                    </div>
                </div>
            </div>
            <button class="upload-bg-btn" id="uploadBgBtn" title="上传背景图片">
                <i class="fas fa-camera"></i>
            </button>
            <input type="file" id="bgImageInput" accept="image/*" style="display: none;">
        </div>

        <!-- 主内容区域 -->
        <div class="main-content">
            <!-- 功能模块导航 -->
            <div class="nav-tabs">
                <button class="nav-tab active" data-tab="warranty">
                    <i class="fas fa-file-contract"></i>
                    <span>质保卡</span>
                </button>
                <button class="nav-tab" data-tab="company">
                    <i class="fas fa-building"></i>
                    <span>公司简介</span>
                </button>
                <button class="nav-tab" data-tab="products">
                    <i class="fas fa-box-open"></i>
                    <span>产品展示</span>
                </button>
                <button class="nav-tab" data-tab="instructions">
                    <i class="fas fa-info-circle"></i>
                    <span>使用须知</span>
                </button>
                <button class="nav-tab" data-tab="contact">
                    <i class="fas fa-phone-alt"></i>
                    <span>联系我们</span>
                </button>
            </div>

            <!-- 质保卡内容 -->
            <div class="tab-content active" id="warrantyContent">
                <div class="product-info-card">
                    <h3>产品信息</h3>
                    <div class="info-grid">
                        <div class="info-item">
                            <span class="info-label">产品名称</span>
                            <span class="info-value" id="productName">锂离子电池组</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">型号规格</span>
                            <span class="info-value" id="productModel">60V60型</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">品牌</span>
                            <span class="info-value" id="productBrand">杰泽</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">制造厂家</span>
                            <span class="info-value" id="manufacturer">杰泽能源</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">生产日期</span>
                            <span class="info-value" id="productionDate">2025-12-23</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">出厂编号</span>
                            <span class="info-value" id="factoryNo">20251212</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">客户姓名</span>
                            <span class="info-value" id="customerName">杰泽</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">客户电话</span>
                            <span class="info-value" id="customerPhone">17520152121</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">安装单位</span>
                            <span class="info-value" id="installer">杰泽能源</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">启用日期</span>
                            <span class="info-value" id="startDate">2025-12-24</span>
                        </div>
                        <div class="info-item">
                            <span class="info-label">质保到期</span>
                            <span class="info-value" id="warrantyExpiry">2028-12-24</span>
                        </div>
                    </div>
                </div>

                <!-- 内容编辑器 -->
                <div class="content-editor" id="warrantyEditor">
                    <div class="editor-toolbar">
                        <button class="editor-btn" onclick="editContent('warranty')">
                            <i class="fas fa-edit"></i> 编辑内容
                        </button>
                        <button class="editor-btn" onclick="saveContent('warranty')">
                            <i class="fas fa-save"></i> 保存
                        </button>
                        <button class="editor-btn" onclick="cancelEdit('warranty')">
                            <i class="fas fa-times"></i> 取消
                        </button>
                    </div>
                    <textarea class="editor-content" id="warrantyEditorContent"></textarea>
                </div>

                <!-- 扫码按钮 -->
                <div class="scan-section">
                    <button class="scan-btn" id="scanBtn">
                        <i class="fas fa-qrcode"></i>
                        扫码
                    </button>
                    <p class="scan-hint">扫描产品二维码激活电子质保</p>
                </div>
            </div>

            <!-- 公司简介内容 -->
            <div class="tab-content" id="companyContent">
                <h3>公司简介</h3>
                <div id="companyInfo">
                    <p>杰泽能源有限公司成立于2010年，是一家专注于新能源电池研发、生产和销售的高新技术企业。公司拥有先进的生产设备和专业的技术团队，产品广泛应用于电动车、储能系统等领域。</p>
                    <p style="margin-top: 12px;">我们坚持以质量求生存，以创新求发展，致力于为客户提供安全、高效、环保的能源解决方案。</p>
                </div>
                
                <div class="content-editor" id="companyEditor">
                    <div class="editor-toolbar">
                        <button class="editor-btn" onclick="editContent('company')">
                            <i class="fas fa-edit"></i> 编辑内容
                        </button>
                        <button class="editor-btn" onclick="saveContent('company')">
                            <i class="fas fa-save"></i> 保存
                        </button>
                        <button class="editor-btn" onclick="cancelEdit('company')">
                            <i class="fas fa-times"></i> 取消
                        </button>
                    </div>
                    <textarea class="editor-content" id="companyEditorContent"></textarea>
                </div>
            </div>

            <!-- 产品展示内容 -->
            <div class="tab-content" id="productsContent">
                <h3>产品展示</h3>
                <div id="productsInfo">
                    <p>杰泽能源提供全系列锂离子电池产品，包括：</p>
                    <ul style="margin-top: 12px; padding-left: 20px;">
                        <li>电动车用锂电池组</li>
                        <li>太阳能储能电池系统</li>
                        <li>家庭备用电源</li>
                        <li>工业储能解决方案</li>
                    </ul>
                </div>
                
                <div class="content-editor" id="productsEditor">
                    <div class="editor-toolbar">
                        <button class="editor-btn" onclick="editContent('products')">
                            <i class="fas fa-edit"></i> 编辑内容
                        </button>
                        <button class="editor-btn" onclick="saveContent('products')">
                            <i class="fas fa-save"></i> 保存
                        </button>
                        <button class="editor-btn" onclick="cancelEdit('products')">
                            <i class="fas fa-times"></i> 取消
                        </button>
                    </div>
                    <textarea class="editor-content" id="productsEditorContent"></textarea>
                </div>
            </div>

            <!-- 使用须知内容 -->
            <div class="tab-content" id="instructionsContent">
                <h3>使用须知</h3>
                <div id="instructionsInfo">
                    <p>为确保电池安全使用和延长使用寿命，请注意以下事项：</p>
                    <ul style="margin-top: 12px; padding-left: 20px;">
                        <li>请使用原装充电器充电</li>
                        <li>避免电池长时间处于高温或低温环境</li>
                        <li>请勿将电池投入火中或拆解电池</li>
                        <li>如电池发生鼓包、漏液等情况，请立即停止使用</li>
                        <li>质保期内如出现质量问题，请出示本电子质保卡</li>
                    </ul>
                </div>
                
                <div class="content-editor" id="instructionsEditor">
                    <div class="editor-toolbar">
                        <button class="editor-btn" onclick="editContent('instructions')">
                            <i class="fas fa-edit"></i> 编辑内容
                        </button>
                        <button class="editor-btn" onclick="saveContent('instructions')">
                            <i class="fas fa-save"></i> 保存
                        </button>
                        <button class="editor-btn" onclick="cancelEdit('instructions')">
                            <i class="fas fa-times"></i> 取消
                        </button>
                    </div>
                    <textarea class="editor-content" id="instructionsEditorContent"></textarea>
                </div>
            </div>

            <!-- 联系我们内容 -->
            <div class="tab-content" id="contactContent">
                <h3>联系我们</h3>
                <div id="contactInfo">
                    <p><strong>杰泽能源有限公司</strong></p>
                    <p style="margin-top: 8px;"><i class="fas fa-map-marker-alt"></i> 地址：浙江省杭州市高新区科技园路88号</p>
                    <p><i class="fas fa-phone"></i> 客服热线：400-800-9000</p>
                    <p><i class="fas fa-envelope"></i> 邮箱：service@jiezhe.com</p>
                    <p><i class="fas fa-globe"></i> 官网：www.jiezhe.com</p>
                </div>
                
                <div class="content-editor" id="contactEditor">
                    <div class="editor-toolbar">
                        <button class="editor-btn" onclick="editContent('contact')">
                            <i class="fas fa-edit"></i> 编辑内容
                        </button>
                        <button class="editor-btn" onclick="saveContent('contact')">
                            <i class="fas fa-save"></i> 保存
                        </button>
                        <button class="editor-btn" onclick="cancelEdit('contact')">
                            <i class="fas fa-times"></i> 取消
                        </button>
                    </div>
                    <textarea class="editor-content" id="contactEditorContent"></textarea>
                </div>
            </div>
        </div>

        <!-- 二维码扫描模态框 -->
        <div class="qr-scanner-modal" id="qrScannerModal">
            <div class="qr-scanner-container">
                <div class="scanner-header">
                    <div class="scanner-title">扫码激活质保</div>
                    <div class="scanner-subtitle">请扫描产品上的12位数字二维码</div>
                </div>
                <div class="scanner-body">
                    <div class="scanner-area" id="scannerArea">
                        <div class="scanner-laser"></div>
                        <div class="scanner-placeholder">
                            <i class="fas fa-qrcode"></i>
                            <p>将二维码放入框内扫描</p>
                        </div>
                    </div>
                    
                    <div class="manual-input">
                        <p>或手动输入12位产品码</p>
                        <div class="input-group">
                            <input type="text" class="code-input" id="manualCodeInput" maxlength="12" placeholder="输入1021开头12位数字">
                            <button class="btn btn-primary" onclick="validateManualCode()">验证</button>
                        </div>
                    </div>
                    
                    <div class="scanner-actions">
                        <button class="btn btn-secondary" onclick="closeScanner()">取消</button>
                        <button class="btn btn-primary" onclick="simulateScan()">模拟扫码</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 激活命令窗口 -->
        <div class="activation-modal" id="activationModal">
            <div class="activation-container">
                <div class="activation-header">
                    <div class="activation-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="activation-title">激活命令已就绪</div>
                </div>
                <div class="activation-body">
                    <p class="activation-message">检测到有效的产品二维码，可以激活电子质保</p>
                    <div class="activation-code" id="activationCodeDisplay"></div>
                    <div class="activation-actions">
                        <button class="btn btn-secondary" onclick="closeActivation()">取消</button>
                        <button class="btn btn-primary" onclick="activateProduct()">立即激活</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // DOM元素
        const headerBackground = document.getElementById('headerBackground');
        const uploadBgBtn = document.getElementById('uploadBgBtn');
        const bgImageInput = document.getElementById('bgImageInput');
        const navTabs = document.querySelectorAll('.nav-tab');
        const tabContents = document.querySelectorAll('.tab-content');
        const scanBtn = document.getElementById('scanBtn');
        const qrScannerModal = document.getElementById('qrScannerModal');
        const activationModal = document.getElementById('activationModal');
        const scannerArea = document.getElementById('scannerArea');
        const manualCodeInput = document.getElementById('manualCodeInput');
        const activationCodeDisplay = document.getElementById('activationCodeDisplay');
        
        // 当前激活的标签
        let activeTab = 'warranty';
        
        // 产品信息数据
        const productData = {
            productName: '锂离子电池组',
            productModel: '60V60型',
            productBrand: '杰泽',
            manufacturer: '杰泽能源',
            productionDate: '2025-12-23',
            factoryNo: '20251212',
            customerName: '杰泽',
            customerPhone: '17520152121',
            installer: '杰泽能源',
            startDate: '2025-12-24',
            warrantyExpiry: '2028-12-24'
        };
        
        // 内容数据
        const contentData = {
            warranty: '',
            company: '杰泽能源有限公司成立于2010年，是一家专注于新能源电池研发、生产和销售的高新技术企业。公司拥有先进的生产设备和专业的技术团队，产品广泛应用于电动车、储能系统等领域。\n\n我们坚持以质量求生存，以创新求发展，致力于为客户提供安全、高效、环保的能源解决方案。',
            products: '杰泽能源提供全系列锂离子电池产品，包括：\n• 电动车用锂电池组\n• 太阳能储能电池系统\n• 家庭备用电源\n• 工业储能解决方案',
            instructions: '为确保电池安全使用和延长使用寿命，请注意以下事项：\n• 请使用原装充电器充电\n• 避免电池长时间处于高温或低温环境\n• 请勿将电池投入火中或拆解电池\n• 如电池发生鼓包、漏液等情况，请立即停止使用\n• 质保期内如出现质量问题，请出示本电子质保卡',
            contact: '杰泽能源有限公司\n地址：浙江省杭州市高新区科技园路88号\n客服热线：400-800-9000\n邮箱：service@jiezhe.com\n官网：www.jiezhe.com'
        };
        
        // 页面加载初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化产品信息
            updateProductInfo();
            
            // 初始化内容
            updateContentDisplay();
            
            // 绑定标签切换事件
            navTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    switchTab(tabId);
                });
            });
            
            // 绑定背景图片上传事件
            uploadBgBtn.addEventListener('click', function() {
                bgImageInput.click();
            });
            
            bgImageInput.addEventListener('change', function(e) {
                if (e.target.files && e.target.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        headerBackground.style.backgroundImage = `url(${e.target.result})`;
                        headerBackground.style.backgroundSize = 'cover';
                        headerBackground.style.backgroundPosition = 'center';
                    };
                    reader.readAsDataURL(e.target.files[0]);
                }
            });
            
            // 绑定扫码按钮事件
            scanBtn.addEventListener('click', openScanner);
            
            // 绑定手动输入框事件
            manualCodeInput.addEventListener('input', function(e) {
                // 只允许输入数字
                this.value = this.value.replace(/\D/g, '');
                // 限制12位
                if (this.value.length > 12) {
                    this.value = this.value.substring(0, 12);
                }
            });
        });
        
        // 切换标签页
        function switchTab(tabId) {
            // 更新活动标签
            navTabs.forEach(tab => {
                if (tab.getAttribute('data-tab') === tabId) {
                    tab.classList.add('active');
                } else {
                    tab.classList.remove('active');
                }
            });
            
            // 更新活动内容
            tabContents.forEach(content => {
                if (content.id === `${tabId}Content`) {
                    content.classList.add('active');
                } else {
                    content.classList.remove('active');
                }
            });
            
            activeTab = tabId;
        }
        
        // 更新产品信息显示
        function updateProductInfo() {
            for (const key in productData) {
                const element = document.getElementById(key);
                if (element) {
                    element.textContent = productData[key];
                }
            }
        }
        
        // 更新内容显示
        function updateContentDisplay() {
            for (const key in contentData) {
                const element = document.getElementById(`${key}Info`);
                if (element && contentData[key]) {
                    // 将换行符转换为HTML
                    const contentWithHtml = contentData[key].replace(/\n/g, '<br>').replace(/•/g, '•');
                    element.innerHTML = contentWithHtml;
                }
            }
        }
        
        // 打开二维码扫描器
        function openScanner() {
            qrScannerModal.style.display = 'flex';
            scannerArea.classList.add('active');
            manualCodeInput.value = '';
        }
        
        // 关闭二维码扫描器
        function closeScanner() {
            qrScannerModal.style.display = 'none';
            scannerArea.classList.remove('active');
        }
        
        // 模拟扫码
        function simulateScan() {
            // 生成一个符合格式的模拟二维码
            const sequence = Math.floor(Math.random() * 99).toString().padStart(2, '0');
            const simulatedCode = `1021${'0'.repeat(6)}${sequence}`;
            
            validateQRCode(simulatedCode);
        }
        
        // 验证手动输入的代码
        function validateManualCode() {
            const code = manualCodeInput.value.trim();
            
            if (!code) {
                alert('请输入12位产品码');
                return;
            }
            
            validateQRCode(code);
        }
        
        // 验证二维码格式
        function validateQRCode(code) {
            // 验证是否为12位数字
            if (!/^\d{12}$/.test(code)) {
                alert('二维码必须是12位数字');
                return false;
            }
            
            // 验证是否以1021开头
            if (!code.startsWith('1021')) {
                alert('二维码必须以1021开头');
                return false;
            }
            
            // 验证序列号（最后两位）
            const sequence = code.substring(10);
            
            // 显示激活窗口
            showActivation(code, sequence);
            closeScanner();
            
            return true;
        }
        
        // 显示激活窗口
        function showActivation(code, sequence) {
            activationCodeDisplay.textContent = code;
            activationModal.style.display = 'flex';
        }
        
        // 关闭激活窗口
        function closeActivation() {
            activationModal.style.display = 'none';
        }
        
        // 激活产品
        function activateProduct() {
            const code = activationCodeDisplay.textContent;
            const sequence = code.substring(10);
            
            // 更新产品信息
            const newProductCode = `1056${'0'.repeat(6)}${sequence}`;
            document.getElementById('productCode').textContent = `一物一码 ${newProductCode}`;
            
            // 更新序列号
            document.getElementById('factoryNo').textContent = newProductCode;
            
            // 显示成功消息
            alert(`产品激活成功！\n产品序列号：${newProductCode}\n序列号：${sequence}`);
            
            // 关闭激活窗口
            closeActivation();
        }
        
        // 内容编辑功能
        function editContent(section) {
            // 隐藏当前内容
            document.getElementById(`${section}Info`).style.display = 'none';
            
            // 显示编辑器
            const editor = document.getElementById(`${section}Editor`);
            editor.classList.add('editor-active');
            
            // 设置编辑器内容
            const editorContent = document.getElementById(`${section}EditorContent`);
            editorContent.value = contentData[section] || '';
        }
        
        // 保存内容
        function saveContent(section) {
            const editorContent = document.getElementById(`${section}EditorContent`);
            const newContent = editorContent.value.trim();
            
            // 更新内容数据
            contentData[section] = newContent;
            
            // 更新显示
            updateContentDisplay();
            
            // 隐藏编辑器，显示内容
            document.getElementById(`${section}Info`).style.display = 'block';
            document.getElementById(`${section}Editor`).classList.remove('editor-active');
            
            alert('内容保存成功！');
        }
        
        // 取消编辑
        function cancelEdit(section) {
            // 隐藏编辑器，显示内容
            document.getElementById(`${section}Info`).style.display = 'block';
            document.getElementById(`${section}Editor`).classList.remove('editor-active');
        }
    </script>
</body>
</html>
